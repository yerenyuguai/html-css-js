<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			#box4 {
				width: 20px;
				height: 20px;
				background-color: #FFFF00;
				position: absolute;
				/*开启绝对定位  不开启的话没法移动*/
			}
		</style>
	</head>

	<body>
		<h1>优化版本   ，优化点在于  快速移动开头会有些卡顿</h1> 上下左右控制方块移动
		<br> crtl+方向 速度更快哦
		<div id="box4">
		</div>
	</body>
	<script type="text/javascript">
		window.onload = function() {
			//根据不同的方向键可以让div按照不同的方向移动

			//定义一个变量控制方块移动的速度
			var speed = 10;
			
			//创建一个变量标识方向
			//通过修改dir来修改移动的方向
			var dir=0;
			//开启一个定时器，来控制div的移动  每隔30ms执行一次
			setInterval(function() {
				switch(dir) {
					case 37: //向左
						box4.style.left = box4.offsetLeft - speed + "px";
						break;
					case 38: //向上
						box4.style.top = box4.offsetTop - (2 * speed) + "px";
						break;
					case 39: //向右
						box4.style.left = box4.offsetLeft + 10 + "px";
						break;
					case 40: //向下
						box4.style.top = box4.offsetTop + (speed + 10) + "px";
						break;
					default:
						break;
				}
			}, 30);

			var box4 = document.getElementById("box4");
			document.onkeydown = function(event) {
				
				event=event||window.event
				// ASCII码    37左   38上   39右  40下

				if(event.ctrlKey) {
					speed = 30;
					//如果按了ctrl，速度加快
				}else{
					//如果松手，速度恢复为10
					speed=10;
				}
				
				// ★★★★★★★★★★   使dir等于按键的值
				dir=event.keyCode;
			}
			//当按键松开，不在移动
			document.onkeyup=function(){
				//设置方向为0
				dir=0;
			}
		}
	</script>

</html>